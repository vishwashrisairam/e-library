/*! The-Noun-Project 2015-03-27 */
"use strict";!function(a){"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define(a):(window.WatchJS=a(),window.watch=window.WatchJS.watch,window.unwatch=window.WatchJS.unwatch,window.callWatchers=window.WatchJS.callWatchers)}(function(){function a(){x=null;for(var a=0;a<w.length;a++)w[a]();w.length=0}var b={noMore:!1,useDirtyCheck:!1},c=[],d=[],e=[],f=!1;try{f=Object.defineProperty&&Object.defineProperty({},"x",{})}catch(g){}var h=function(a){var b={};return a&&"[object Function]"==b.toString.call(a)},i=function(a){return"[object Array]"===Object.prototype.toString.call(a)},j=function(a){return"[object Object]"==={}.toString.apply(a)},k=function(a,b){var c=[],d=[];if("string"!=typeof a&&"string"!=typeof b){if(i(a))for(var e=0;e<a.length;e++)void 0===b[e]&&c.push(e);else for(var e in a)a.hasOwnProperty(e)&&void 0===b[e]&&c.push(e);if(i(b))for(var f=0;f<b.length;f++)void 0===a[f]&&d.push(f);else for(var f in b)b.hasOwnProperty(f)&&void 0===a[f]&&d.push(f)}return{added:c,removed:d}},l=function(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)b[c]=a[c];return b},m=function(a,b,c,d){try{Object.observe(a,function(a){a.forEach(function(a){a.name===b&&d(a.object[a.name])})})}catch(e){try{Object.defineProperty(a,b,{get:c,set:function(a){d.call(this,a,!0)},enumerable:!0,configurable:!0})}catch(f){try{Object.prototype.__defineGetter__.call(a,b,c),Object.prototype.__defineSetter__.call(a,b,function(a){d.call(this,a,!0)})}catch(g){o(a,b,d)}}}},n=function(a,b,c){try{Object.defineProperty(a,b,{enumerable:!1,configurable:!0,writable:!1,value:c})}catch(d){a[b]=c}},o=function(a,b,c){d[d.length]={prop:b,object:a,orig:l(a[b]),callback:c}},p=function(){h(arguments[1])?q.apply(this,arguments):i(arguments[1])?r.apply(this,arguments):s.apply(this,arguments)},q=function(a,b,c,d){if("string"!=typeof a&&(a instanceof Object||i(a))){if(i(a)){if(D(a,"__watchall__",b,c),void 0===c||c>0)for(var e=0;e<a.length;e++)q(a[e],b,c,d)}else{var e,g=[];for(e in a)"$val"==e||!f&&"watchers"===e||Object.prototype.hasOwnProperty.call(a,e)&&g.push(e);r(a,g,b,c,d)}d&&R(a,"$$watchlengthsubjectroot",b,c)}},r=function(a,b,c,d,e){if("string"!=typeof a&&(a instanceof Object||i(a)))for(var f=0;f<b.length;f++){var g=b[f];s(a,g,c,d,e)}},s=function(a,b,c,d,e){"string"!=typeof a&&(a instanceof Object||i(a))&&(h(a[b])||(null!=a[b]&&(void 0===d||d>0)&&q(a[b],c,void 0!==d?d-1:d),D(a,b,c,d),e&&(void 0===d||d>0)&&R(a,b,c,d)))},t=function(){h(arguments[1])?u.apply(this,arguments):i(arguments[1])?v.apply(this,arguments):I.apply(this,arguments)},u=function(a,b){if(!(a instanceof String)&&(a instanceof Object||i(a)))if(i(a)){for(var c=["__watchall__"],d=0;d<a.length;d++)c.push(d);v(a,c,b)}else{var e=function(a){var c=[];for(var d in a)a.hasOwnProperty(d)&&(a[d]instanceof Object?e(a[d]):c.push(d));v(a,c,b)};e(a)}},v=function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&I(a,b[d],c)},w=[],x=null,y=function(){return x||(x=setTimeout(a)),x},z=function(a){null==x&&y(),w[w.length]=a},A=function(){var a=h(arguments[2])?C:B;a.apply(this,arguments)},B=function(a,b,c,d){var e,f=null,g=-1,h=i(a),j=function(c,d,e,i){var j=y();if(g!==j&&(g=j,f={type:"update"},f.value=a,f.splices=null,z(function(){b.call(this,f),f=null})),h&&a===this&&null!==f){if("pop"===d||"shift"===d)e=[],i=[i];else if("push"===d||"unshift"===d)e=[e],i=[];else if("splice"!==d)return;f.splices||(f.splices=[]),f.splices[f.splices.length]={index:c,deleteCount:i?i.length:0,addedCount:e?e.length:0,added:e,deleted:i}}};e=1==c?void 0:0,q(a,j,e,d)},C=function(a,b,c,d,e){a&&b&&(s(a,b,function(a,b,f,g){var h={type:"update"};h.value=f,h.oldvalue=g,(d&&j(f)||i(f))&&B(f,c,d,e),c.call(this,h)},0),(d&&j(a[b])||i(a[b]))&&B(a[b],c,d,e))},D=function(a,c,d,e){var f=!1,g=i(a);a.watchers||(n(a,"watchers",{}),g&&H(a,function(b,d,f,g){if(N(a,b,d,f,g),0!==e&&f&&(j(f)||i(f))){var h,k,l,m,n=a.watchers[c];for((m=a.watchers.__watchall__)&&(n=n?n.concat(m):m),l=n?n.length:0,h=0;l>h;h++)if("splice"!==d)q(f,n[h],void 0===e?e:e-1);else for(k=0;k<f.length;k++)q(f[k],n[h],void 0===e?e:e-1)}})),a.watchers[c]||(a.watchers[c]=[],g||(f=!0));for(var h=0;h<a.watchers[c].length;h++)if(a.watchers[c][h]===d)return;if(a.watchers[c].push(d),f){var k=a[c],l=function(){return k},p=function(d,f){var g=k;if(k=d,0!==e&&a[c]&&(j(a[c])||i(a[c]))&&!a[c].watchers){var h,l=a.watchers[c].length;for(h=0;l>h;h++)q(a[c],a.watchers[c][h],void 0===e?e:e-1)}return K(a,c)?(L(a,c),void 0):(b.noMore||g!==d&&(f?N(a,c,"set",d,g):E(a,c,"set",d,g),b.noMore=!1),void 0)};b.useDirtyCheck?o(a,c,p):m(a,c,l,p)}},E=function(a,b,c,d,e){if(void 0!==b){var f,g,h=a.watchers[b];(g=a.watchers.__watchall__)&&(h=h?h.concat(g):g),f=h?h.length:0;for(var i=0;f>i;i++)h[i].call(a,b,c,d,e)}else for(var b in a)a.hasOwnProperty(b)&&E(a,b,c,d,e)},F=["pop","push","reverse","shift","sort","slice","unshift","splice"],G=function(a,b,c,d){n(a,c,function(){var e,f,g,h,i=0;if("splice"===c){var j=arguments[0],k=j+arguments[1];for(g=a.slice(j,k),f=[],e=2;e<arguments.length;e++)f[e-2]=arguments[e];i=j}else f=arguments.length>0?arguments[0]:void 0;return h=b.apply(a,arguments),"slice"!==c&&("pop"===c?(g=h,i=a.length):"push"===c?i=a.length-1:"shift"===c?g=h:"unshift"!==c&&void 0===f&&(f=h),d.call(a,i,c,f,g)),h})},H=function(a,b){if(h(b)&&a&&!(a instanceof String)&&i(a))for(var c,d=F.length;d--;)c=F[d],G(a,a[c],c,b)},I=function(a,b,c){if(void 0===c&&a.watchers[b])delete a.watchers[b];else for(var d=0;d<a.watchers[b].length;d++){var e=a.watchers[b][d];e==c&&a.watchers[b].splice(d,1)}S(a,b,c),T(a,b)},J=function(a,b){if(a.watchers){var c="__wjs_suspend__"+(void 0!==b?b:"");a.watchers[c]=!0}},K=function(a,b){return a.watchers&&(a.watchers.__wjs_suspend__||a.watchers["__wjs_suspend__"+b])},L=function(a,b){z(function(){delete a.watchers.__wjs_suspend__,delete a.watchers["__wjs_suspend__"+b]})},M=null,N=function(a,b,c,d,f){e[e.length]={obj:a,prop:b,mode:c,newval:d,oldval:f},null===M&&(M=setTimeout(O))},O=function(){var a=null;M=null;for(var b=0;b<e.length;b++)a=e[b],E(a.obj,a.prop,a.mode,a.newval,a.oldval);a&&(e=[],a=null)},P=function(){for(var a=0;a<c.length;a++){var b=c[a];if("$$watchlengthsubjectroot"===b.prop){var e=k(b.obj,b.actual);(e.added.length||e.removed.length)&&(e.added.length&&r(b.obj,e.added,b.watcher,b.level-1,!0),b.watcher.call(b.obj,"root","differentattr",e,b.actual)),b.actual=l(b.obj)}else{var e=k(b.obj[b.prop],b.actual);if(e.added.length||e.removed.length){if(e.added.length)for(var f=0;f<b.obj.watchers[b.prop].length;f++)r(b.obj[b.prop],e.added,b.obj.watchers[b.prop][f],b.level-1,!0);E(b.obj,b.prop,"differentattr",e,b.actual)}b.actual=l(b.obj[b.prop])}}var g,h;for(var a in d)g=d[a],h=g.object[g.prop],Q(g.orig,h)||(g.orig=l(h),g.callback(h))},Q=function(a,b){var c,d=!0;if(a!==b)if(j(a)){for(c in a)if((f||"watchers"!==c)&&a[c]!==b[c]){d=!1;break}}else d=!1;return d},R=function(a,b,d,e){var f;f="$$watchlengthsubjectroot"===b?l(a):l(a[b]),c.push({obj:a,prop:b,actual:f,watcher:d,level:e})},S=function(a,b,d){for(var e=0;e<c.length;e++){var f=c[e];f.obj==a&&f.prop==b&&f.watcher==d&&c.splice(e,1)}},T=function(a,b){for(var c,e=0;e<d.length;e++){var f=d[e],g=f.object.watchers;c=f.object==a&&f.prop==b&&g&&(!g[b]||0==g[b].length),c&&d.splice(e,1)}};return setInterval(P,50),b.watch=p,b.unwatch=t,b.callWatchers=E,b.suspend=J,b.onChange=A,b});